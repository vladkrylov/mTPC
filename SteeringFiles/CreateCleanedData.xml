<?xml version="1.0" encoding="us-ascii"?>
<!-- ?xml-stylesheet type="text/xsl" href="http://ilcsoft.desy.de/marlin/marlin.xsl"? -->
<!-- ?xml-stylesheet type="text/xsl" href="marlin.xsl"? -->

<!--
============================================================================================================================
   Steering File generated by Marlin GUI on Tue Apr 28 14:32:56 2015

   WARNING: - Please be aware that comments made in the original steering file were lost.
            - Processors that are not installed in your Marlin binary lost their parameter's descriptions and types as well.
            - Extra parameters that aren't categorized as default in a processor lost their description and type.
============================================================================================================================
-->


<marlin xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="http://ilcsoft.desy.de/marlin/marlin.xsd">

   <execute>
      <processor name="MyAIDAProcessor"/>
      <processor name="MyConditionsProcessor"/>
      <processor name="MyTimePixMapHandlerProcessor"/>
      <processor name="MyTimePixRemoveMaskedPixelsProcessor"/>
      <processor name="MyTrackerRawDataToDataConverterProcessor"/>
      <processor name="MyTimepixThrowEventOrChipProcessor"/>
      <processor name="MyPixelSpectrumProcessor"/>
      <processor name="MyLCIOOutputProcessor"/>
   </execute>

   <global>
      <parameter name="LCIOInputFiles"> ../LCIOFile </parameter>
      <parameter name="GearXMLFile" value="GearTB_fine.xml"/>
      <parameter name="MaxRecordNumber" value=""/>
      <parameter name="SkipNEvents" value="0"/>
      <parameter name="SupressCheck" value="false"/>
      <parameter name="Verbosity" value="MESSAGE"/>
   </global>

 <processor name="MyAIDAProcessor" type="AIDAProcessor">
 <!--Processor that handles AIDA files. Creates on directory per processor.  Processors only need to create and fill the histograms, clouds and tuples. Needs to be the first ActiveProcessor-->
  <!-- compression of output file 0: false >0: true (default) -->
  <parameter name="Compress" type="int" value="1"/>
  <!-- filename without extension-->
  <parameter name="FileName" type="string" value="aida3_file"/>
  <!-- type of output file root (default) or xml )-->
  <parameter name="FileType" type="string" value="root"/>
  <!--verbosity level of this processor ("DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT")-->
  <!--parameter name="Verbosity" type="string" value=""/-->
</processor>

<processor name="MyConditionsProcessor" type="ConditionsProcessor">
  <!--Initialization of a simple conditions file handler-->
  <!--parameter name="SimpleFileHandler" type="StringVec">conditionsName
  conditions.slcio collectionName  </parameter-->
  <parameter name="SimpleFileHandler" type="StringVec">TimePixModeMap  
    /home/tpc/marlintpc/lupberger/TimePixModeMap160TIME.slcio 
    TimePixModeMap160TIME  </parameter>
  <parameter name="SimpleFileHandler" type="StringVec">TimePixStatusMap
    ../StatusMap
    TimePixStatusMap  </parameter>
  <!--parameter name="SimpleFileHandler" type="StringVec"> TimePixCalibrationMap 
    /home/data/Workspace/conditionsForAllRuns/TimePixDistrDelayCorrectionMap_empty.slcio  
    TimePixCalibrationMap  </parameter-->
  <!--parameter name="SimpleFileHandler" type="StringVec"> TimePixCalibrationParameters 
    /home/data/Workspace/conditionsForAllRuns/TimePixCalibrationParametersOctoboard.slcio 
    TimePixCalibrationParameters  </parameter-->
</processor>

 <processor name="MyTimePixMapHandlerProcessor" type="TimePixMapHandlerProcessor">
 <!--TimePixMapHandlerProcessor further seperates the clusters found in the TimePixClusterFinderProcessor by projecting them onto their own axis-->
  <!--Name of the mode map collection-->
  <parameter name="ModeMapCollectionName" type="string" lcioInType="LCGenericObject"> TimePixModeMap </parameter>
  <!--Name of the status map collection-->
  <parameter name="StatusMapCollectionName" type="string" lcioInType="LCGenericObject"> TimePixStatusMap </parameter>
  <!--if not 0 the output collection is set transient-->
  <parameter name="SetOutputTransient" type="int" value="0"/>
  <!--verbosity level of this processor ("DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT")-->
  <!--parameter name="Verbosity" type="string" value=""/-->
</processor>

 <processor name="MyTimePixRemoveMaskedPixelsProcessor" type="TimePixRemoveMaskedPixelsProcessor">
 <!--TimePixRemoveMaskedPixelsProcessor converts TrackerRawData of TimePix into zerosuppressed TrackerRawData by only keeping ADC values above a certain threshold-->
  <!--Name of the input collection-->
  <parameter name="InputCollectionName" type="string" lcioInType="TrackerRawData"> TimePixRawData </parameter>
  <!--Name of the output collection-->
  <parameter name="OutputCollectionName" type="string" lcioOutType="TrackerRawData"> TimePixCleanedRawData </parameter>
  <!--If true dead pixels are removed from data-->
  <parameter name="RemoveDeadPixels" type="bool" value="true"/>
  <!--If true noisy pixels are removed from data-->
  <parameter name="RemoveNoisyPixels" type="bool" value="true"/>
  <!--if not 0 the output collection is set transient-->
  <parameter name="SetOutputTransient" type="int" value="0"/>
  <!--Throw SkipEventException if TimePix data is empty-->
  <parameter name="SkipEmptyEvents" type="bool" value="true"/>
  <!--verbosity level of this processor ("DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT")-->
  <!--parameter name="Verbosity" type="string" value=""/-->
</processor>

 <processor name="MyTrackerRawDataToDataConverterProcessor" type="TrackerRawDataToDataConverterProcessor">
 <!--TrackerRawDataToDataConverterProcessor converts the TrackerRawData to TrackerData without processing the values-->
  <!--Name of the input collection-->
  <parameter name="InputCollectionName" type="string" lcioInType="TrackerRawData"> TimePixCleanedRawData </parameter>
  <!--Name of the output collection-->
  <parameter name="OutputCollectionName" type="string" lcioOutType="TrackerData"> TimePixCleanedData </parameter>
  <!--The last bin number, after which all bins will be set to zero-->
  <!--parameter name="SetEntriesToZeroAfterBin" type="int" value="0"/-->
  <!--The first bin number which is taken into account; bins before will be set to zero-->
  <!--parameter name="SetEntriesToZeroBeforeBin" type="int" value="0"/-->
  <!-- Sorry, this parameter isn't a default parameter for this processor: description and type lost!!  -->
  <parameter name="SetOutputTransient" value="1"/>
  <!--verbosity level of this processor ("DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT")-->
  <!--parameter name="Verbosity" type="string" value=""/-->
  <!--if true the output collection is written-->
  <parameter name="WriteOutputToStorage" type="bool" value="true"/>
</processor>

 <processor name="MyTimepixThrowEventOrChipProcessor" type="TimepixThrowEventOrChipProcessor">
  <parameter name="InputCollectionName" type="string" lcioInType="TrackerData"> TimePixCleanedData </parameter>
  <parameter name="OutputCollectionName" type="string" lcioOutType="TrackerData"> TimePixCleanedThrownData </parameter>
  <parameter name="ThrowCompleteEvent" type="bool" value="../ThrowCompleteEvent" />
  <parameter name="LogFileName" type="string" value="../HighCountEvents"> </parameter>
</processor>

 <processor name="MyPixelSpectrumProcessor" type="PixelSpectrumProcessor">
 <!--PixelSpectrumProcessor creates a histgram for TOT and TIME over all events-->
  <!--Name of the input collection-->
  <parameter name="InputCollectionName" type="string" lcioInType="TrackerData"> TimePixCleanedThrownData </parameter>
  <!--High threshold from wich pixel are collected in _myBadPixelLocation2dHisto-->
  <parameter name="HighTH" type="int" value="../HighTH"/>
  <!--Position of logfile-->
  <parameter name="LogFile" type="string" value="PixelSpecLog"/>
  <!--Low threshold from wich pixel are collected in _myBadPixelLocation2dHisto-->
  <parameter name="LowTH" type="int" value="0"/>
  <!--Minimal Number of Pixels with Bad Counts to create Event Display-->
  <parameter name="LowerBadCountsLimit" type="int" value="0"/>
  <!--MaxZ Maximum z value of highest bin in case of z binning (default: 4000)-->
  <parameter name="Maxclock" type="float" value="11810"/>
  <!--MinZ Minimum z value of lowest bin in case of z binning (default: 2500)-->
  <parameter name="Minclock" type="float" value="0"/>
  <!--mode that should be plotted (TOT, TIMEPIX, MEDIPIX, ONEHIT or ANY), default: ANY-->
  <parameter name="Mode" type="string" value="TIMEPIX"/>
  <!--verbosity level of this processor ("DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT")-->
  <!--parameter name="Verbosity" type="string" value=""/-->
  <!--Number ob bins in z, 0 means one Histo without z cut (default: 100)-->
  <parameter name="nBins" type="int" value="0"/>
  <!--Number of chips (default: 1)-->
  <parameter name="NumberOfChips" type="int" value="160"/>
  <!--% of events in which a pixel counts more than HighTH before getting masked (default: 100)-->
  <parameter name="HighCountCutVal" type="double" value="../PerCentHighCountsPerPixel"/>
  <!--Number of pixels with a count higher than _HighTH allowed per chip in an event, before it is reported (default: 256*256 = no cut)-->
  <parameter name="HighCountPerChipEvent" type="int" value="../allowedHighCountsPerChip"/>
</processor>

 <processor name="MyLCIOOutputProcessor" type="LCIOOutputProcessor">
 <!--Writes the current event to the specified LCIO outputfile. Needs to be the last ActiveProcessor.-->
  <!--drops the named collections from the event-->
  <!--parameter name="DropCollectionNames" type="StringVec"> TPCHits HCalHits </parameter-->
  <!--drops all collections of the given type from the event-->
  <!--parameter name="DropCollectionTypes" type="StringVec"> SimTrackerHit SimCalorimeterHit </parameter-->
  <!-- write complete objects in subset collections to the file (i.e. ignore subset flag)-->
  <!--parameter name="FullSubsetCollections" type="StringVec" value="MCParticlesSkimmed"/-->
  <!--force keep of the named collections - overrules DropCollectionTypes (and DropCollectionNames)-->
  <!--parameter name="KeepCollectionNames" type="StringVec" value="MyPreciousSimTrackerHits"/-->
  <!-- name of output file -->
  <parameter name="LCIOOutputFile" type="string" value="TimePixCleanedThrownData.slcio"/>
  <!--write mode for output file:  WRITE_APPEND or WRITE_NEW-->
  <parameter name="LCIOWriteMode" type="string" value="WRITE_NEW"/>
  <!--will split output file if size in kB exceeds given value - doesn't work with APPEND and NEW-->
  <!--parameter name="SplitFileSizekB" type="int" value="1992294"/-->
  <!--verbosity level of this processor ("DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT")-->
  <!--parameter name="Verbosity" type="string" value=""/-->
</processor>

</marlin>
