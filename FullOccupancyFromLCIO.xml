<?xml version="1.0" encoding="us-ascii"?>
<!-- ?xml-stylesheet type="text/xsl" href="http://ilcsoft.desy.de/marlin/marlin.xsl"? -->
<!-- ?xml-stylesheet type="text/xsl" href="marlin.xsl"? -->

<!--
============================================================================================================================
   Steering File generated by Marlin GUI on Tue Apr 28 14:32:56 2015

   WARNING: - Please be aware that comments made in the original steering file were lost.
            - Processors that are not installed in your Marlin binary lost their parameter's descriptions and types as well.
            - Extra parameters that aren't categorized as default in a processor lost their description and type.
============================================================================================================================
-->


<marlin xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="http://ilcsoft.desy.de/marlin/marlin.xsd">

   <execute>
      <processor name="MyAIDAProcessor"/>
      <processor name="MyConditionsProcessor"/>
      <processor name="MyTimePixMapHandlerProcessor"/>
      <processor name="MyTimePixRemoveMaskedPixelsProcessor"/>
      <processor name="MyTrackerRawDataToDataConverterProcessor"/>
      <processor name="MyTimePixOccupancyProcessor"/>
      <!--processor name="MyLCIOOutputProcessor"/-->
   </execute>

   <global>
      <parameter name="LCIOInputFiles"> TimePixRawData96.slcio </parameter>
      <parameter name="GearXMLFile" value="GearLAL.xml"/>
      <parameter name="MaxRecordNumber" value="2"/>
      <parameter name="SkipNEvents" value="0"/>
      <parameter name="SupressCheck" value="false"/>
      <parameter name="Verbosity" value="MESSAGE"/>
   </global>

 <processor name="MyAIDAProcessor" type="AIDAProcessor">
 <!--Processor that handles AIDA files. Creates on directory per processor.  Processors only need to create and fill the histograms, clouds and tuples. Needs to be the first ActiveProcessor-->
  <!-- compression of output file 0: false >0: true (default) -->
  <parameter name="Compress" type="int" value="1"/>
  <!-- filename without extension-->
  <parameter name="FileName" type="string" value="aida_file"/>
  <!-- type of output file root (default) or xml )-->
  <parameter name="FileType" type="string" value="root"/>
  <!--verbosity level of this processor ("DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT")-->
  <!--parameter name="Verbosity" type="string" value=""/-->
</processor>

<processor name="MyConditionsProcessor" type="ConditionsProcessor">
  <!--Initialization of a simple conditions file handler-->
  <!--parameter name="SimpleFileHandler" type="StringVec">conditionsName
  conditions.slcio collectionName  </parameter-->
  <parameter name="SimpleFileHandler" type="StringVec">TimePixModeMap  
    TimePixModeMap96TOT.slcio
    TimePixModeMap96TOT  </parameter>
  <parameter name="SimpleFileHandler" type="StringVec">TimePixStatusMap
    StatusMap96Empty.slcio
    TimePixStatusMap  </parameter>
  <!--parameter name="SimpleFileHandler" type="StringVec"> TimePixCalibrationMap 
    /home/data/Workspace/conditionsForAllRuns/TimePixDistrDelayCorrectionMap_empty.slcio  
    TimePixCalibrationMap  </parameter-->
  <!--parameter name="SimpleFileHandler" type="StringVec"> TimePixCalibrationParameters 
    /home/data/Workspace/conditionsForAllRuns/TimePixCalibrationParametersOctoboard.slcio 
    TimePixCalibrationParameters  </parameter-->
</processor>

 <processor name="MyTimePixMapHandlerProcessor" type="TimePixMapHandlerProcessor">
 <!--TimePixMapHandlerProcessor further seperates the clusters found in the TimePixClusterFinderProcessor by projecting them onto their own axis-->
  <!--Name of the mode map collection-->
  <parameter name="ModeMapCollectionName" type="string" lcioInType="LCGenericObject"> TimePixModeMap </parameter>
  <!--Name of the status map collection-->
  <parameter name="StatusMapCollectionName" type="string" lcioInType="LCGenericObject"> TimePixStatusMap </parameter>
  <!--if not 0 the output collection is set transient-->
  <parameter name="SetOutputTransient" type="int" value="0"/>
  <!--verbosity level of this processor ("DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT")-->
  <!--parameter name="Verbosity" type="string" value=""/-->
</processor>

 <processor name="MyTimePixRemoveMaskedPixelsProcessor" type="TimePixRemoveMaskedPixelsProcessor">
 <!--TimePixRemoveMaskedPixelsProcessor converts TrackerRawData of TimePix into zerosuppressed TrackerRawData by only keeping ADC values above a certain threshold-->
  <!--Name of the input collection-->
  <parameter name="InputCollectionName" type="string" lcioInType="TrackerRawData"> TimePixRawData </parameter>
  <!--Name of the output collection-->
  <parameter name="OutputCollectionName" type="string" lcioOutType="TrackerRawData"> TimePixCleanedRawData </parameter>
  <!--If true dead pixels are removed from data-->
  <parameter name="RemoveDeadPixels" type="bool" value="true"/>
  <!--If true noisy pixels are removed from data-->
  <parameter name="RemoveNoisyPixels" type="bool" value="true"/>
  <!--if not 0 the output collection is set transient-->
  <parameter name="SetOutputTransient" type="int" value="0"/>
  <!--Throw SkipEventException if TimePix data is empty-->
  <parameter name="SkipEmptyEvents" type="bool" value="true"/>
  <!--verbosity level of this processor ("DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT")-->
  <!--parameter name="Verbosity" type="string" value=""/-->
</processor>

 <processor name="MyTrackerRawDataToDataConverterProcessor" type="TrackerRawDataToDataConverterProcessor">
 <!--TrackerRawDataToDataConverterProcessor converts the TrackerRawData to TrackerData without processing the values-->
  <!--Name of the input collection-->
  <parameter name="InputCollectionName" type="string" lcioInType="TrackerRawData"> TimePixCleanedRawData </parameter>
  <!--Name of the output collection-->
  <parameter name="OutputCollectionName" type="string" lcioOutType="TrackerData"> TimePixZeroCleanedData </parameter>
  <!--The last bin number, after which all bins will be set to zero-->
  <!--parameter name="SetEntriesToZeroAfterBin" type="int" value="0"/-->
  <!--The first bin number which is taken into account; bins before will be set to zero-->
  <!--parameter name="SetEntriesToZeroBeforeBin" type="int" value="0"/-->
  <!-- Sorry, this parameter isn't a default parameter for this processor: description and type lost!!  -->
  <parameter name="SetOutputTransient" value="1"/>
  <!--verbosity level of this processor ("DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT")-->
  <!--parameter name="Verbosity" type="string" value=""/-->
  <!--if true the output collection is written-->
  <parameter name="WriteOutputToStorage" type="bool" value="true"/>
</processor>

 <processor name="MyTimePixOccupancyProcessor" type="TimePixOccupancyProcessor">
 <!--TimePixOccupancyProcessor: Count how many times a pixel has been hit-->
  <!--Name of the input collection  with lcio::TrackerData (default: TimePixInterpolatedData)-->
  <parameter name="InputColName" type="string" lcioInType="TrackerData"> TimePixZeroCleanedData </parameter>
  <!--ID number(s) of the chip(s) (default: 0) - make sure they match the entries in the chipOrientation vector, if set-->
  <parameter name="ChipIDs" type="IntVec" value="24 25 26 27 59 58 57 56 91 90 89 88 31 30 29 28 60 61 62 63 92 93 94 95 19 18 17 16 51 50 49 48 83 82 81 80 20 21 22 23 52 53 54 55 84 85 86 87 11 10 9 8 43 42 41 40 75 74 73 72 12 13 14 15 44 45 46 47 76 77 78 79 0 1 2 3 35 34 33 32 67 66 65 64 7 6 5 4 39 38 37 36 68 69 70 71"/>
  <!--Number of colmns on the chip (default: 256)-->
  <parameter name="NColumns" type="int" value="256"/>
  <!--Number of rows on the chip (default: 256)-->
  <parameter name="NRows" type="int" value="256"/>
  <!--verbosity level of this processor ("DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT")-->
  <!--parameter name="Verbosity" type="string" value=""/-->
  <!--Vector containing the position of the zero on the chip. 0 = lower left corner, 1 = lower right corner, 2 = upper right corner, 3 = upper left corner. Make sure the entrys match the the entries in the chip ID vector-->
  <parameter name="chipOrientation" type="IntVec" value="0 0 0 0 0 0 0 0 0 0 0 0 2 2 2 2 2 2 2 2 2 2 2 2 0 0 0 0 0 0 0 0 0 0 0 0 2 2 2 2 2 2 2 2 2 2 2 2 0 0 0 0 0 0 0 0 0 0 0 0 2 2 2 2 2 2 2 2 2 2 2 2 0 0 0 0 0 0 0 0 0 0 0 0 2 2 2 2 2 2 2 2 2 2 2 2"/>
  <!--Number of modules/chips in a column-->
  <parameter name="nColumnModules" type="int" value="12"/>
  <!--Number of modules/chips in a row-->
  <parameter name="nRowModules" type="int" value="8"/>
  <parameter name="CutMaxOcc" type="double" value = "2"/>
  <parameter name="CutDeadPixelOnChip" type="int" value="3500"/>
  <parameter name="CutDeadPixelOnRow" type="int" value="85"/>
  <parameter name="CutDeadPixelOnCol" type="int" value="85"/>
</processor>

 <processor name="MyLCIOOutputProcessor" type="LCIOOutputProcessor">
 <!--Writes the current event to the specified LCIO outputfile. Needs to be the last ActiveProcessor.-->
  <!--drops the named collections from the event-->
  <!--parameter name="DropCollectionNames" type="StringVec"> TPCHits HCalHits </parameter-->
  <!--drops all collections of the given type from the event-->
  <!--parameter name="DropCollectionTypes" type="StringVec"> SimTrackerHit SimCalorimeterHit </parameter-->
  <!-- write complete objects in subset collections to the file (i.e. ignore subset flag)-->
  <!--parameter name="FullSubsetCollections" type="StringVec" value="MCParticlesSkimmed"/-->
  <!--force keep of the named collections - overrules DropCollectionTypes (and DropCollectionNames)-->
  <!--parameter name="KeepCollectionNames" type="StringVec" value="MyPreciousSimTrackerHits"/-->
  <!-- name of output file -->
  <parameter name="LCIOOutputFile" type="string" value="TimePixZeroCleanedData.slcio"/>
  <!--write mode for output file:  WRITE_APPEND or WRITE_NEW-->
  <parameter name="LCIOWriteMode" type="string" value="WRITE_NEW"/>
  <!--will split output file if size in kB exceeds given value - doesn't work with APPEND and NEW-->
  <!--parameter name="SplitFileSizekB" type="int" value="1992294"/-->
  <!--verbosity level of this processor ("DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT")-->
  <!--parameter name="Verbosity" type="string" value=""/-->
</processor>

</marlin>
